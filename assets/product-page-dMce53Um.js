import{d as x,o as l,c as u,b as a,z as P,A as v,a as _,t as g,h as L,j as b,B as j,F as k,f as m,x as T,r as V,C as o,m as R,e as O,_ as M}from"./index-BSjoGW-V.js";import{l as w,u as C,_ as B}from"./lodash-DqkDTI2-.js";const S=["src"],N=x({__name:"app-modal",props:{src:{}},emits:["toggleModal"],setup(f,{emit:d}){const r=d;document.addEventListener("keydown",c);function c(n){n.key==="Escape"&&r("toggleModal"),document.removeEventListener("keydown",c)}return(n,i)=>(l(),u("div",{class:"fixed top-0 left-0 bottom-0 right-0 bg-black bg-opacity-50 flex justify-center items-center",onClick:i[0]||(i[0]=t=>n.$emit("toggleModal"))},[a("img",{src:n.src,alt:"Фото изделия",class:"my-20"},null,8,S)]))}}),$=P(N,[["__scopeId","data-v-98cffde2"]]),y="/ct-app/assets/placeholder-i_9VXY_j.svg",z={class:"flex items-center gap-2"},F=["src"],H=x({__name:"accessory-item",props:{order_num:{},name:{},src:{}},setup(f){const d=f,r=v(!1),c=v(d.src||y);function n(){r.value=!r.value}function i(t){navigator.clipboard.writeText(t)}return(t,s)=>(l(),u(k,null,[a("li",z,[a("img",{src:c.value,alt:"Фото аксессуара",class:"w-32 h-32 object-scale-down cursor-pointer",onError:s[0]||(s[0]=e=>c.value=_(y)),onClick:n},null,40,F),a("p",null,[a("b",{class:"cursor-alias",onClick:s[1]||(s[1]=()=>i(String(t.order_num)))},g(t.order_num),1),L(" - "),a("span",{class:"cursor-alias",onClick:s[2]||(s[2]=()=>i(t.name))},g(t.name),1)])]),r.value?(l(),b(_($),{key:0,src:c.value,onToggleModal:n},null,8,["src"])):j("",!0)],64))}}),U={class:"flex flex-col items-center gap-5 md:flex-row md:items-start"},X=["src"],Y={class:"flex flex-col"},q=a("p",{class:"mt-2.5 text-xl font-semibold"},"Технические характеристики:",-1),G={class:"mt-2.5"},J=x({__name:"product-info",props:{productData:{}},setup(f){const d=f,r=v(!1),c=v(y),n=m(()=>{const s=[];for(const e in d.productData)["_id","Артикул","Наименование","Серия","src"].includes(e)||s.push(`${e}: ${d.productData[e]}`);return s});function i(s){navigator.clipboard.writeText(s)}function t(){r.value=!r.value}return T(()=>{w.isUndefined(d.productData.src)||(c.value=d.productData.src)}),(s,e)=>(l(),u(k,null,[a("div",U,[a("img",{class:"w-80 h-80 object-scale-down cursor-pointer",src:c.value,alt:"Фото изделия",onError:e[0]||(e[0]=h=>c.value=_(y)),onClick:t},null,40,X),a("div",Y,[a("h1",{class:"text-3xl font-semibold cursor-alias",onClick:e[1]||(e[1]=()=>i(String(s.productData.Наименование)))},g(s.productData.Наименование),1),a("h2",{class:"text-3xl text-stone-600 mt-2.5 cursor-alias",onClick:e[2]||(e[2]=()=>i(String(s.productData.Артикул)))},g(s.productData.Артикул),1),q,(l(!0),u(k,null,V(n.value,h=>(l(),u("p",G,g(h),1))),256))])]),r.value?(l(),b(_($),{key:0,src:c.value,onToggleModal:t},null,8,["src"])):j("",!0)],64))}}),K={key:1,class:"max-w-screen-xl"},Q={class:"mt-7"},W=a("h3",{class:"text-2xl font-semibold mb-2"},"Аксессуары:",-1),Z={key:0,class:"grid gap-1 mt-2"},ss={key:1},os=x({__name:"product-page",setup(f){const d=O(),r=C(),{fetchProducts:c}=r,n=v([]),i=v(!1),t=m(()=>d.params.category),s=m(()=>d.params.product),e=m(()=>r.products.find(p=>p.Артикул==s.value)||{}),h=m(()=>n.value.filter(p=>{if(typeof e.value.Серия=="string")return e.value.Серия.split(", ").includes(p.Серия)})),I=m(()=>!!n.value.length);r.products.length||(c(t.value),A(t.value)),T(()=>A(t.value));async function A(p){i.value=!0,e.value.Серия&&await B(Object.assign({"../../../shared/data/accessories/buzzers.json":()=>o(()=>import("./buzzers-pT8S5AwY.js"),__vite__mapDeps([])),"../../../shared/data/accessories/cable-box.json":()=>o(()=>import("./cable-box-CS0QAhF6.js"),__vite__mapDeps([])),"../../../shared/data/accessories/contactors.json":()=>o(()=>import("./contactors-Bodd2ikV.js"),__vite__mapDeps([])),"../../../shared/data/accessories/din-rails.json":()=>o(()=>import("./din-rails-DLPonmZI.js"),__vite__mapDeps([])),"../../../shared/data/accessories/fans.json":()=>o(()=>import("./fans-CMzNkCfu.js"),__vite__mapDeps([])),"../../../shared/data/accessories/fuses.json":()=>o(()=>import("./fuses-Bo837fH8.js"),__vite__mapDeps([])),"../../../shared/data/accessories/heaters.json":()=>o(()=>import("./heaters-wHmbc9qv.js"),__vite__mapDeps([])),"../../../shared/data/accessories/mcb.json":()=>o(()=>import("./mcb-BJguGtjc.js"),__vite__mapDeps([])),"../../../shared/data/accessories/mccb.json":()=>o(()=>import("./mccb-B-xY3Zay.js"),__vite__mapDeps([])),"../../../shared/data/accessories/modular-loadbreakers.json":()=>o(()=>import("./modular-loadbreakers-Mld4KsAY.js"),__vite__mapDeps([])),"../../../shared/data/accessories/monoblock-lights.json":()=>o(()=>import("./monoblock-lights-BPDQlb6Z.js"),__vite__mapDeps([])),"../../../shared/data/accessories/mpsb.json":()=>o(()=>import("./mpsb-CMqVt3oQ.js"),__vite__mapDeps([])),"../../../shared/data/accessories/relay.json":()=>o(()=>import("./relay-ALwoAjxj.js"),__vite__mapDeps([])),"../../../shared/data/accessories/terminal-blocks.json":()=>o(()=>import("./terminal-blocks-DoPa4y4v.js"),__vite__mapDeps([]))}),`../../../shared/data/accessories/${p}.json`).then(E=>{n.value=E.default}).catch(E=>console.log(E)),i.value=!1}return(p,E)=>i.value?(l(),b(_(M),{key:0})):(l(),u("div",K,[R(_(J),{"product-data":e.value},null,8,["product-data"]),a("div",Q,[W,I.value?(l(),u("ul",Z,[(l(!0),u(k,null,V(h.value,D=>(l(),b(_(H),{key:D._id,name:D.Наименование,order_num:D.Артикул,src:D.src},null,8,["name","order_num","src"]))),128))])):(l(),u("p",ss,"Аксессуары пока не добавлены, либо отсутствуют"))])]))}});export{os as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
